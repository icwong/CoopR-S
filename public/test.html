<!DOCTYPE html>
<html>
<head>
  <title>testing new features</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
  
  </style>
  
  <script type="text/javascript" src="/saveTextAsFile.js"></script>
  <script type="text/javascript" src="/googleDrive.js"></script>
  
  
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Picker Example</title>

    <script type="text/javascript">

      // The Browser API key obtained from the Google Developers Console.
      var developerKey = '_PC3tmQctADV2f-5W73fbu0l';

      // The Client ID obtained from the Google Developers Console. Replace with your own Client ID.
      var clientId = "292884386983-q55cajdj6vht1ii92v07b5h606krg0og"

      // Scope to use to access user's docs.
      var scope = ['https://www.googleapis.com/auth/drive'];

      var pickerApiLoaded = false;
      var oauthToken;

      // Use the API Loader script to load google.picker and gapi.auth.
      function onApiLoad() {
        gapi.load('auth', {'callback': onAuthApiLoad});
        gapi.load('picker', {'callback': onPickerApiLoad});
      }

      function onAuthApiLoad() {
        window.gapi.auth.authorize(
            {
              'client_id': clientId,
              'scope': scope,
              'immediate': false
            },
            handleAuthResult);
      }

      function onPickerApiLoad() {
        pickerApiLoaded = true;
        createPicker();
      }

      function handleAuthResult(authResult) {
        if (authResult && !authResult.error) {
          oauthToken = authResult.access_token;
          createPicker();
        }
      }

      // Create and render a Picker object for picking user Photos.
      function createPicker() {
        if (pickerApiLoaded && oauthToken) {
          var picker = new google.picker.PickerBuilder().
              addView(google.picker.ViewId.DOCS).
              setOAuthToken(oauthToken).
  //            setDeveloperKey(developerKey).
              setCallback(pickerCallback).
              build();
          picker.setVisible(true);
        }
      }

      // A simple callback implementation.
      function pickerCallback(data) {
        var url = 'nothing';
        if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
          var doc = data[google.picker.Response.DOCUMENTS][0];
          url = doc[google.picker.Document.URL];
        }
        //var message = 'You picked: ' + url;
        var message = url;
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        loadDriveFileAsText(url);
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        document.getElementById('result').innerHTML = message;
      }
    </script>
</head>


<body>

  <div class="dialog">
    <div>
      <h1>hello</h1>
      <p>test new features here!</p>
    </div>
    
   <table>
    	<tr><td>Text to Save:</td></tr>
    	<tr>
    		<td colspan="3">
    			<textarea id="inputTextToSave" style="width:512px;height:256px"></textarea>
    		</td>
    	</tr>
    	<tr>
    		<td>Filename to Save As:</td>
    		<td><input id="inputFileNameToSaveAs"></input></td>
    		<td><button onclick="saveTextAsFile()">Save Text to File</button></td>
    	</tr>
    	<tr>
    		<td>Select a File to Load:</td>
    		<td><input type="file" id="fileToLoad">
    		<td><button onclick="loadFileAsText()">Load Selected File</button><td>
    	</tr>
  
    </table>
    


<div id="result" onclick="loadDriveFileAsText()"></div>
    <h1>HELLO DRIVE</H1>
    <!-- The Google API Loader script. -->
    

    
    <!--<input id='getDoc' type="button" value="download" onclick="https://apis.google.com/js/api.js?onload=onApiLoad;selectSourceFile()">-->
    <script type="text/javascript" src="https://apis.google.com/js/api.js?onload=onApiLoad"></script>
    
    

<a href = "/hellodrive">link to picker</a>


    <p>save gif to drive</p>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <div class="g-savetodrive"
    data-src= "/ok-24.gif"        
    data-filename="ok.gif"
    data-sitename="My Company Name">
    </div>
    
  </div>
</body>
</html>
